const fs = require('fs');
const path = require('path');

const targetPath = path.join(__dirname, '../src/app/api/api-configuration.ts');

const content = `/* tslint:disable */
/* eslint-disable */
/* Code generated by ng-openapi-gen. Patched by post-gen script. */

import { Inject, Injectable, InjectionToken } from '@angular/core';

export const API_ROOT_URL = new InjectionToken<string>('API_ROOT_URL');

/**
 * Global configuration
 */
@Injectable({
  providedIn: 'root',
})
export class ApiConfiguration {
  constructor(@Inject(API_ROOT_URL) public rootUrl: string) {}
}

/**
 * Parameters for \`ApiModule.forRoot()\`
 */
export interface ApiConfigurationParams {
  rootUrl?: string;
}
`;

try {
    fs.writeFileSync(targetPath, content, 'utf8');
    console.log('✅ ApiConfiguration successfully patched to use InjectionToken.');
} catch (err) {
    console.error('❌ Error patching ApiConfiguration:', err);
    process.exit(1);
}
