<div class="cards-wrapper">
    <mat-card class="custom-card card-blue" appearance="outlined">
      <mat-card-header>
          <mat-card-title>Sign in</mat-card-title>
          <mat-card-subtitle>Enter your credentials to access your account</mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <form class="form-field-full" [formGroup]="loginForm">
          <div class="role-container">
            <div class="role-btn-wrapper"
                *ngFor="let role of buttonRoles"
                [ngClass]="[role.colorClass, selectedButtonRole === role.id ? 'selected' : '']"
                (click)="selectButtonRole(role.id)"
              >
                <div class="circle">
                  <mat-icon class="main-icon">{{ role.icon }}</mat-icon>
                  <mat-icon class="check-icon">check</mat-icon>
                </div>
                <span class="label">{{ role.label }}</span>
            </div>
          </div>

          <mat-form-field appearance="fill" class="w-full">
            <mat-label>Selecciona un Tenant</mat-label>
            <mat-select formControlName="tenantCode" color="primary">
              <mat-option *ngFor="let t of tenantsOptions" [value]="t.code">
                {{ t.name }}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field appearance="outline" color="primary">
            <mat-label>{{ 'email' | translate }}:</mat-label>
            <input matInput placeholder="email" formControlName="email" required />
            @if (email.invalid) {
              <mat-error>
                @if (email.errors?.['required']) {
                  <span>
                    {{ 'common.field_isRequired' | translate:{ fieldName: 'Email' } }}
                  </span>
                }
                @if (email.errors?.['remote']) {
                  <span>{{ email.errors?.['remote'] }}</span>
                }
              </mat-error>
            }
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>{{ 'password' | translate }}: </mat-label>
            <input
              matInput
              placeholder="entre your password"
              type="password"
              formControlName="password"
              required
            />
            @if (password.invalid) {
              <mat-error>
                @if (password.errors?.['required']) {
                  <span>
                    {{ 'common.field_isRequired' | translate:{ fieldName: 'Password' } }}
                  </span>
                }
                @if (password.errors?.['remote']) {
                  <span>{{ password.errors?.['remote'] }}</span>
                }
              </mat-error>
            }
          </mat-form-field>

          <div class="remember-forgot-row">
            <mat-checkbox formControlName="rememberMe" color="primary">
              {{ 'common.remember_me' | translate }}
            </mat-checkbox>

            <a class="forgot-link" (click)="forgotPassword()">
              {{ 'common.forgot_password' | translate }}
            </a>
          </div>

          <!-- <button
            mat-flat-button
            color="primary"
            class="w-full m-y-16"
            [disabled]="loginForm.invalid || isSubmitting"
            (click)="onLogin()"
          >
            @if (!isSubmitting) {
              <span>{{ 'common.login' | translate }}</span>
            } @else {
              <mat-progress-spinner
                diameter="20"
                mode="indeterminate"
                color="accent">
              </mat-progress-spinner>
            }
          </button> -->
          <button mat-flat-button color="primary" class="w-full m-y-16" (click)="onLogin()">
            @if (!isSubmitting) {
              <span>{{ 'common.login' | translate }}</span>
            } @else {
              <mat-progress-spinner
                diameter="20"
                mode="indeterminate"
                color="accent">
              </mat-progress-spinner>
            }
          </button>

        </form>
      </mat-card-content>

      <mat-card-actions class="actions-center">
        <p>
          <span>{{ 'common.have_no_account' | translate }}</span>&nbsp;
          <a routerLink="register" (click)="register()">
            {{ 'common.sign_up' | translate }}
          </a>
        </p>
      </mat-card-actions>

    </mat-card>

    <mat-card class="custom-card card-green">

        <mat-card-header>
            <mat-card-title>Tarjeta de Promoción</mat-card-title>
            <mat-card-subtitle>Oferta por tiempo limitado</mat-card-subtitle>
        </mat-card-header>

        <mat-card-content>
            <p>
                La segunda tarjeta usa un color de fondo diferente para llamar la atención
                sobre una promoción o información secundaria importante.
            </p>
        </mat-card-content>

        <mat-card-actions>
            <button mat-flat-button color="accent">¡COMPRAR AHORA!</button>
        </mat-card-actions>

    </mat-card>

</div>
