<div class="dashboard-container" *ngIf="currentUser$ | async as user">
    <div class="welcome-section">
        <h1 class="mat-display-1">{{ 'dashboard.welcome_back' | translate: {name: user.personName || user.email} }}</h1>
        <p class="subtitle">{{ 'dashboard.role' | translate }}: {{ user.roles?.[0] || 'User' }} | {{ 'dashboard.tenant'
            | translate }}: {{ user.tenantCode || 'Vitalia' }}</p>
    </div>

    <!-- ADMIN DASHBOARD -->
    <div class="stats-grid" *ngIf="isAdmin">
        <mat-card class="dashboard-card info-card">
            <mat-card-header>
                <mat-icon mat-card-avatar class="accent-icon">people</mat-icon>
                <mat-card-title>{{ 'dashboard.admin.patients.title' | translate }}</mat-card-title>
                <mat-card-subtitle>{{ 'dashboard.admin.patients.subtitle' | translate }}</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
                <h2 class="stat-number">1,240</h2>
                <p>+12 {{ 'dashboard.this_month' | translate }}</p>
            </mat-card-content>
        </mat-card>

        <mat-card class="dashboard-card action-card">
            <mat-card-header>
                <mat-icon mat-card-avatar color="primary">medical_services</mat-icon>
                <mat-card-title>{{ 'dashboard.admin.staff.title' | translate }}</mat-card-title>
                <mat-card-subtitle>{{ 'dashboard.admin.staff.subtitle' | translate }}</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
                <h2 class="stat-number">45</h2>
                <p>{{ 'dashboard.admin.staff.active' | translate }}</p>
            </mat-card-content>
        </mat-card>

        <mat-card class="dashboard-card warning-card">
            <mat-card-header>
                <mat-icon mat-card-avatar color="warn">warning</mat-icon>
                <mat-card-title>{{ 'dashboard.admin.alerts.title' | translate }}</mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <p>2 {{ 'dashboard.admin.alerts.maintenance_needed' | translate }}</p>
            </mat-card-content>
        </mat-card>
    </div>

    <!-- DOCTOR DASHBOARD -->
    <div class="stats-grid" *ngIf="isDoctor">
        <mat-card class="dashboard-card action-card">
            <mat-card-header>
                <mat-icon mat-card-avatar color="primary">calendar_today</mat-icon>
                <mat-card-title>My Appointments</mat-card-title>
                <mat-card-subtitle>Today's Schedule</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
                <h2 class="stat-number">8</h2>
                <p>Next: 10:30 AM - Patient J. Doe</p>
            </mat-card-content>
            <mat-card-actions>
                <button mat-button color="primary">VIEW CALENDAR</button>
            </mat-card-actions>
        </mat-card>

        <mat-card class="dashboard-card info-card">
            <mat-card-header>
                <mat-icon mat-card-avatar class="accent-icon">assignment_ind</mat-icon>
                <mat-card-title>My Patients</mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <h2 class="stat-number">154</h2>
                <p>Assigned to you</p>
            </mat-card-content>
        </mat-card>

        <mat-card class="dashboard-card">
            <mat-card-header>
                <mat-icon mat-card-avatar>science</mat-icon>
                <mat-card-title>Lab Results</mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <p>3 New reports available for review.</p>
            </mat-card-content>
        </mat-card>
    </div>

    <!-- NURSE DASHBOARD -->
    <div class="stats-grid" *ngIf="isNurse">
        <mat-card class="dashboard-card warning-card">
            <mat-card-header>
                <mat-icon mat-card-avatar color="warn">priority_high</mat-icon>
                <mat-card-title>Triage Queue</mat-card-title>
                <mat-card-subtitle>Waiting Area</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
                <h2 class="stat-number">12</h2>
                <p>Avg Wait: 15 mins</p>
            </mat-card-content>
            <mat-card-actions>
                <button mat-button color="warn">START TRIAGE</button>
            </mat-card-actions>
        </mat-card>

        <mat-card class="dashboard-card info-card">
            <mat-card-header>
                <mat-icon mat-card-avatar class="accent-icon">monitor_heart</mat-icon>
                <mat-card-title>Vitals Pending</mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <p>Room 304 needs BP check.</p>
                <p>Room 305 needs Temp check.</p>
            </mat-card-content>
        </mat-card>

        <mat-card class="dashboard-card">
            <mat-card-header>
                <mat-icon mat-card-avatar>meeting_room</mat-icon>
                <mat-card-title>Occupancy</mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <h2 class="stat-number">85%</h2>
                <p>2 Beds Available</p>
            </mat-card-content>
        </mat-card>
    </div>

    <!-- PATIENT DASHBOARD -->
    <div class="stats-grid" *ngIf="isPatient">
        <mat-card class="dashboard-card action-card">
            <mat-card-header>
                <mat-icon mat-card-avatar color="primary">event</mat-icon>
                <mat-card-title>Next Appointment</mat-card-title>
                <mat-card-subtitle>Dr. House - Cardiology</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
                <h2 class="stat-number">Oct 24</h2>
                <p>10:00 AM - Room 302</p>
            </mat-card-content>
            <mat-card-actions>
                <button mat-button color="primary">RESCHEDULE</button>
            </mat-card-actions>
        </mat-card>

        <mat-card class="dashboard-card info-card">
            <mat-card-header>
                <mat-icon mat-card-avatar class="accent-icon">description</mat-icon>
                <mat-card-title>Latest Reports</mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <p>Blood Test Results (10/12)</p>
                <p>Ready to view.</p>
            </mat-card-content>
            <mat-card-actions>
                <button mat-button color="accent">VIEW RECORDS</button>
            </mat-card-actions>
        </mat-card>

        <mat-card class="dashboard-card">
            <mat-card-header>
                <mat-icon mat-card-avatar>medication</mat-icon>
                <mat-card-title>Prescriptions</mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <p>2 Active Prescriptions</p>
                <p>Refill available in 5 days.</p>
            </mat-card-content>
        </mat-card>
    </div>

    <!-- EMPLOYEE DASHBOARD -->
    <div class="stats-grid" *ngIf="isEmployee">
        <mat-card class="dashboard-card action-card">
            <mat-card-header>
                <mat-icon mat-card-avatar color="primary">assignment</mat-icon>
                <mat-card-title>My Tasks</mat-card-title>
                <mat-card-subtitle>Pending Actions</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
                <h2 class="stat-number">5</h2>
                <p>3 High Priority</p>
            </mat-card-content>
            <mat-card-actions>
                <button mat-button color="primary">VIEW TASKS</button>
            </mat-card-actions>
        </mat-card>

        <mat-card class="dashboard-card">
            <mat-card-header>
                <mat-icon mat-card-avatar>calendar_month</mat-icon>
                <mat-card-title>Shift</mat-card-title>
                <mat-card-subtitle>This Week</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
                <p>Today: 08:00 - 16:00</p>
                <p>Tomorrow: 08:00 - 16:00</p>
            </mat-card-content>
        </mat-card>

        <mat-card class="dashboard-card info-card">
            <mat-card-header>
                <mat-icon mat-card-avatar class="accent-icon">campaign</mat-icon>
                <mat-card-title>Announcements</mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <p>Staff meeting on Friday at 3PM.</p>
            </mat-card-content>
        </mat-card>
    </div>
</div>