/* ðŸš€ SIDEBAR STYLES - Absolute Token Isolation */

app-sidebar {
    display: block;
    height: 100%;
}

.sidebar {
    display: flex;
    flex-direction: column;
    height: 100%;
    background-color: var(--sidebar-bg);
    color: var(--sidebar-text);
    border-right: 1px solid var(--sidebar-border);
    transition: width 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    overflow: hidden !important;

    app-sidemenu {
        display: flex;
        flex-direction: column;
        flex: 1;
        min-height: 0;
        overflow: hidden !important;
    }

    &.collapsed {
        overflow: visible !important;

        app-sidemenu {
            overflow: visible !important;
        }
    }
}

.sidebar-header {
    height: 64px;
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 0 16px;
    border-bottom: 1px solid var(--sidebar-border);
    font-weight: 700;
    flex-shrink: 0;
    white-space: nowrap;
    overflow: hidden;
}

.user-info {
    display: flex;
    align-items: center;
    gap: 12px;
    margin: 12px;
    padding: 12px;
    border-radius: 12px;
    background-color: var(--sys-surface-2);
    flex-shrink: 0;
    overflow: hidden;

    mat-icon {
        font-size: 32px;
        width: 32px;
        height: 32px;
        flex-shrink: 0;
    }

    .name {
        font-weight: 600;
        font-size: 0.9rem;
        text-overflow: ellipsis;
        overflow: hidden;
        white-space: nowrap;
    }

    .role {
        font-size: 0.75rem;
        opacity: 0.8;
    }
}

/* ðŸŽ¨ THEME MIXIN ... */
@mixin force-sidebar-theme($bg, $text, $text-muted, $border, $surface1, $surface2, $hover) {
    --sys-surface-0: #{$bg};
    --sys-surface-1: #{$surface1};
    --sys-surface-2: #{$surface2};
    --sys-text-primary: #{$text};
    --sys-text-secondary: #{$text-muted};
    --sys-border-subtle: #{$border};
    --state-hover-surface: #{$hover};

    --sidebar-bg: var(--sys-surface-0);
    --sidebar-text: var(--sys-text-primary);
    --sidebar-text-muted: var(--sys-text-secondary);
    --sidebar-border: var(--sys-border-subtle);

    .sidebar,
    .sidebar-header,
    .user-info,
    .name,
    .role,
    span,
    mat-icon:not(.brand-icon) {
        color: var(--sidebar-text) !important;
    }

    .sidebar {
        background-color: var(--sidebar-bg) !important;
    }

    .sidebar-header {
        border-bottom-color: var(--sidebar-border) !important;
    }
}

body.sidebar-light app-sidebar {
    @include force-sidebar-theme(#ffffff, #1e293b, #64748b, rgba(0, 0, 0, 0.05), #f8f9fa, #f1f3f5, rgba(0, 0, 0, 0.04));
}

body.sidebar-dark app-sidebar {
    @include force-sidebar-theme(#121212, #ffffff, #cbd5e1, rgba(255, 255, 255, 0.05), #1e1e1e, #232323, rgba(255, 255, 255, 0.05));
}