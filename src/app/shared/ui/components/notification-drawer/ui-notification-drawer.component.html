<div class="ui-drawer-backdrop" *ngIf="isOpen" (click)="onClose()"></div>

<aside class="ui-drawer" *ngIf="isOpen" [@slideIn]>
    <header class="ui-drawer__header">
        <h2 class="ui-drawer__title">{{ i18n.title }}</h2>
        <div class="ui-drawer__actions">
            <ui-icon-button icon="done_all" variant="ghost" size="sm" [ariaLabel]="i18n.markAllRead"
                (clicked)="markAllRead()">
            </ui-icon-button>
            <ui-icon-button icon="close" variant="ghost" size="sm" [ariaLabel]="i18n.closeAriaLabel"
                (clicked)="onClose()">
            </ui-icon-button>
        </div>
    </header>

    <div class="ui-drawer__content">
        @if (notifications().length === 0) {
        <div class="ui-drawer__empty">
            <mat-icon class="ui-drawer__empty-icon">notifications_off</mat-icon>
            <p>{{ i18n.emptyState }}</p>
        </div>
        } @else {
        <ul class="ui-notification-list">
            @for (item of notifications(); track item.id) {
            <li class="ui-notification-item" [class.ui-notification-item--unread]="!item.read">
                <div class="ui-notification-item__icon ui-notification-item__icon--{{ item.type }}">
                    <mat-icon>{{ item.icon || 'notifications' }}</mat-icon>
                </div>
                <div class="ui-notification-item__body">
                    <h4 class="ui-notification-item__title">{{ item.title }}</h4>
                    <p class="ui-notification-item__message">{{ item.message }}</p>
                    <span class="ui-notification-item__time">{{ item.timestamp | date:'shortTime' }}</span>
                </div>
                <div class="ui-notification-item__actions">
                    @if (!item.read) {
                    <button class="ui-notification-action" (click)="markAsRead(item.id, $event)"
                        aria-label="Mark as read">
                        <div class="ui-dot"></div>
                    </button>
                    }
                    <button class="ui-notification-action-remove" (click)="remove(item.id, $event)" aria-label="Remove">
                        <mat-icon>close</mat-icon>
                    </button>
                </div>
            </li>
            }
        </ul>
        }
    </div>
</aside>