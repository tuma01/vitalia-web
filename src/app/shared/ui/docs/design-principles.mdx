import { Meta } from '@storybook/blocks';

<Meta title="Docs/Design Principles" />

# ⚖️ Principios de Diseño del PAL

El **Product Abstraction Layer (PAL)** se rige por tres leyes fundamentales que garantizan que el sistema escale sin perder cohesión ni accesibilidad.

## 1. Geometría Determinista
Cada componente tiene una forma definida y predecible. No permitimos "pixel pushing" ad-hoc en los consumidores.
- **Ley de la Notch**: Las etiquetas flotantes y sus recortes (legends) deben ser matemáticamente precisos.
- **Escala de 4px**: Todos los espaciados internos son múltiplos de 4, asegurando ritmo vertical y horizontal.

## 2. Jerarquía de Responsabilidades (Orquestador vs. Átomo)
Separamos la **semántica** de la **implementación**.
- **El Átomo** no sabe nada de errores de red o lógica de negocio. Solo sabe renderizar estados visuales y emitir eventos.
- **El Orquestador** (`UiFormField`) es el cerebro. Él decide cuándo un campo es inválido y qué mensaje de ayuda mostrar.

## 3. Accesibilidad "Fused" (Fundida)
La accesibilidad no es un "extra" que se añade al final; es parte del motor interno.
- **Sincronización Automática**: Si un campo tiene un error, el `aria-invalid` cambia automáticamente vía Signals.
- **Encadenamiento ARIA**: Los IDs de los hints y errores se gestionan automáticamente para que el lector de pantalla siempre anuncie el contexto correcto.

## 4. OnPush by Default
Todos los componentes utilizan `ChangeDetectionStrategy.OnPush`. 
- **Inmutabilidad**: El flujo de datos es descendente y explícito.
- **Rendimiento**: Maximizamos la velocidad del renderizado en formularios complejos.

---

> "Build once, represent everywhere. accessible by everyone."
