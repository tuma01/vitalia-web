<div class="theme-editor-wrapper">
    <div class="theme-editor-sidebar">
        <header>
            <h2>üé® Theme Admin</h2>
            <p>Live Preview Engine</p>
        </header>

        <!-- üåç BRAND -->
        <div class="control-group">
            <label>Brand Preset</label>
            <div class="select-wrapper">
                <select [ngModel]="brand()" (ngModelChange)="brand.set($event); resetToBrandPreset()">
                    <option *ngFor="let b of availableBrands" [value]="b">{{ b | titlecase }}</option>
                </select>
                <div class="icon">‚ñº</div>
            </div>
        </div>

        <!-- üåó MODE -->
        <div class="control-group">
            <label>Color Mode</label>
            <div class="toggle-group">
                <button [class.active]="mode() === 'light'" (click)="mode.set('light')">‚òÄÔ∏è Light</button>
                <button [class.active]="mode() === 'dark'" (click)="mode.set('dark')">üåô Dark</button>
            </div>
        </div>

        <!-- üìè DENSITY -->
        <div class="control-group">
            <label>Density</label>
            <div class="select-wrapper">
                <select [ngModel]="density()" (ngModelChange)="density.set($event)">
                    <option value="default">Default</option>
                    <option value="comfortable">Comfortable</option>
                    <option value="compact">Compact</option>
                </select>
                <div class="icon">‚ñº</div>
            </div>
        </div>

        <hr />

        <!-- üé® OVERRIDES -->
        <div class="control-group compact">
            <label>Primary Color</label>
            <div class="color-picker">
                <input type="color" [ngModel]="primaryColor()" (ngModelChange)="primaryColor.set($event)" />
                <span>{{ primaryColor() }}</span>
            </div>
        </div>

        <div class="control-group compact">
            <label>Secondary Color</label>
            <div class="color-picker">
                <input type="color" [ngModel]="secondaryColor()" (ngModelChange)="secondaryColor.set($event)" />
                <span>{{ secondaryColor() }}</span>
            </div>
        </div>

        <div class="control-group compact">
            <label>Background</label>
            <div class="color-picker">
                <input type="color" [ngModel]="backgroundColor()" (ngModelChange)="backgroundColor.set($event)" />
                <span>{{ backgroundColor() }}</span>
            </div>
        </div>

        <div class="control-group compact">
            <label>Text Color</label>
            <div class="color-picker">
                <input type="color" [ngModel]="textColor()" (ngModelChange)="textColor.set($event)" />
                <span>{{ textColor() }}</span>
            </div>
        </div>

        <div class="control-group">
            <label>Font Family</label>
            <input type="text" class="text-input" [ngModel]="fontFamily()" (ngModelChange)="fontFamily.set($event)" />
        </div>

        <hr />

        <button class="save-btn" (click)="saveTheme()">üíæ Save Configuration</button>
    </div>

    <!-- üñºÔ∏è PREVIEW CANVAS -->
    <!-- Aplicamos las variables CSS din√°micamente aqu√≠ -->
    <div class="theme-preview-canvas" [ngStyle]="{
        '--brand-primary': currentTheme().tokens.brand.primary,
        '--brand-secondary': currentTheme().tokens.brand.secondary,
        '--text-primary': currentTheme().tokens.text.primary,
        '--surface-background': currentTheme().tokens.surface.background,
        '--font-family': currentTheme().tokens.typography.fontFamily,
        '--surface-border': currentTheme().tokens.surface.border
      }">

        <div class="preview-card">
            <div style="margin-bottom: 24px;">
                <h3 style="margin:0; font-family:'Outfit',sans-serif; font-size:1.25rem;">Vista Previa</h3>
                <p style="margin:4px 0 0; opacity:0.7; font-size:0.9rem;">Simulaci√≥n en vivo del tema {{ brand() |
                    titlecase }}.</p>
            </div>

            <div class="form-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px;">
                <!-- Nombre -->
                <ui-form-field label="Nombre" [required]="true">
                    <ui-input placeholder="Ingrese su nombre"></ui-input>
                </ui-form-field>

                <!-- Correo con Error -->
                <ui-form-field label="Correo" [error]="'Correo inv√°lido'">
                    <ui-input placeholder="correo@ejemplo.com"></ui-input>
                </ui-form-field>

                <!-- Select -->
                <ui-form-field label="Seleccionar opci√≥n">
                    <ui-select-native>
                        <option value="1">Opci√≥n 1</option>
                        <option value="2">Opci√≥n 2</option>
                        <option value="3">Opci√≥n 3</option>
                    </ui-select-native>
                </ui-form-field>

                <!-- Preferencias -->
                <ui-form-field label="Preferencias">
                    <div style="display: flex; flex-direction: column; gap: 8px; padding-top: 8px;">
                        <ui-checkbox label="Acepto t√©rminos"></ui-checkbox>
                        <ui-radio-group name="grupo1" style="display: flex; flex-direction: column; gap: 8px;">
                            <ui-radio value="a">Opci√≥n A</ui-radio>
                            <ui-radio value="b">Opci√≥n B</ui-radio>
                        </ui-radio-group>
                    </div>
                </ui-form-field>
            </div>

            <div class="status-bar"
                style="margin-top: 24px; padding-top: 16px; border-top: 1px solid rgba(0,0,0,0.1); display: flex; justify-content: space-between; align-items: center; font-family:'Inter',monospace; font-size:0.8rem; opacity:0.6;">
                <span>{{ brand() }} / {{ mode() }} / {{ density() }}</span>
                <span class="badge"
                    style="background:currentColor; color:white; padding:2px 6px; border-radius:4px; font-weight:bold; font-size:0.7rem;">LIVE</span>
            </div>
        </div>

    </div>
</div>