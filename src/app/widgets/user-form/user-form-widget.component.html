<form [formGroup]="form" (ngSubmit)="onSubmit()" class="user-form-widget-container">
    <ui-card variant="outlined" [hoverable]="true">
        <ui-card-header>
            <h3 uiCardTitle>Crear Usuario</h3>
            <span uiCardSubtitle>Dashboard / GestiÃ³n de Usuarios</span>
        </ui-card-header>

        <ui-card-content class="flex flex-col gap-4">
            <!-- Email Field -->
            <ui-form-field label="Email" [required]="true">
                <ui-input uiInput type="email" formControlName="email" placeholder="usuario@dominio.com"></ui-input>
                @if (form.get('email')?.invalid && form.get('email')?.touched) {
                <ui-error uiError>
                    Email invÃ¡lido
                </ui-error>
                }
            </ui-form-field>

            <!-- Role Select -->
            <ui-select formControlName="role" label="Rol" placeholder="Seleccione un rol" [options]="roleOptions"
                [required]="true">
            </ui-select>

            <!-- Password Field -->
            <ui-form-field label="ContraseÃ±a" [required]="true">
                <span uiPrefix>ğŸ”’</span>
                <ui-input uiInput [type]="showPassword ? 'text' : 'password'" formControlName="password"
                    placeholder="Ingrese contraseÃ±a">
                </ui-input>
                <button uiSuffix type="button" (click)="togglePasswordVisibility()" tabindex="-1"
                    style="background:none; border:none; cursor:pointer;"
                    [attr.aria-label]="showPassword ? 'Hide password' : 'Show password'">
                    {{ showPassword ? 'ğŸ‘ï¸' : 'ğŸ‘ï¸â€ğŸ—¨ï¸' }}
                </button>
                @if (form.get('password')?.invalid && form.get('password')?.touched) {
                <ui-error uiError>
                    ContraseÃ±a requerida
                </ui-error>
                }
            </ui-form-field>

            <!-- Active User Checkbox -->
            <ui-checkbox formControlName="active">
                Usuario Activo
            </ui-checkbox>

            <!-- Terms Checkbox -->
            <ui-checkbox formControlName="terms" [required]="true">
                Acepto los tÃ©rminos y condiciones de la plataforma
            </ui-checkbox>
            @if (form.get('terms')?.invalid && form.get('terms')?.touched) {
            <div class="text-error text-xs mt-1">
                Debes aceptar los tÃ©rminos
            </div>
            }

        </ui-card-content>

        <ui-card-footer>
            <div class="flex justify-end gap-2 w-full">
                <ui-button type="button" variant="ghost" (click)="onReset()">
                    Descartar
                </ui-button>
                <ui-button type="submit" variant="primary" [disabled]="form.invalid || form.disabled">
                    Guardar Usuario
                </ui-button>
            </div>
        </ui-card-footer>
    </ui-card>
</form>